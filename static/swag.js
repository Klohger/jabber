"use strict";var SOURCE_CONNECTOR,__awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((o=o.apply(e,t||[])).next())})};!function(e){var t;let n;(t=n||(n={})).events=[["RecieveMessageFrom",e=>{let t=JSON.parse(e.data);console.log("RecieveMessageFrom",t)},],["RecieveRecordFrom",e=>{let t=JSON.parse(e.data);console.log("RecieveRecordFrom",t)},],["VesselEntered",e=>{let t=JSON.parse(e.data);o.appendChild(l(t.moniker)),console.log("VesselEntered",t)},],["VesselLeft",e=>{var t;let n=JSON.parse(e.data);null===(t=document.getElementById(n.moniker))||void 0===t||t.remove(),console.log("VesselLeft",n)},],["Disconnect",t=>{let n=JSON.parse(t.data);o.innerHTML="",console.log("Disconnect",n),e.eventSource.close()},],["Unworthy",t=>{let n=JSON.parse(t.data);console.log("Unworthy",n),e.eventSource.close()},],];let o=document.getElementById("THE_LIST");function r(e){return fetch(`ATTEMPT_SOURCE_ENTRANCE/${e.moniker_suggestion}`).then(e=>__awaiter(this,void 0,void 0,function*(){if(202===e.status)return yield e.json();throw yield e.text()}),e=>{throw e})}function i(e,t){}function a(e,t){}function l(e){let t=document.createElement("div");t.id=e;let n=document.createElement("img");return n.src="COMPUTER_ICON",t.appendChild(n),t.innerText=e,t}__awaiter(this,void 0,void 0,function*(){var t,i;return i=((t=yield function e(){return __awaiter(this,void 0,void 0,function*(){let e;{let t=null,n,o;do{if(null===(n=prompt(null===t?"Choose a moniker to wield for THE SOURCE.":t)))continue;o=r({moniker_suggestion:n})}while(yield o.then(t=>(e=t,!1),e=>(t=e,!0)))}return e})}()).otherVessels.forEach(e=>o.appendChild(l(e))),Object.assign({},t)),void(e.eventSource=new EventSource(`THE_SOURCE/${i.moniker}/${i.password}`),e.eventSource.onopen=e=>{console.log("entered THE SOURCE")},n.events.forEach(([t,n])=>e.eventSource.addEventListener(t,n)))})}(SOURCE_CONNECTOR||(SOURCE_CONNECTOR={}));//# sourceMappingURL=swag.js.map